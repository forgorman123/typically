-- uhhhh no it snto used code wdym bro

local Player = game:GetService("Players").LocalPlayer
local Camera = game:GetService("Workspace").CurrentCamera
local UserInputService = game:GetService("UserInputService")

local FontValue = 1

local function CycleFont()
    if FontValue + 1 > 3 then
       FontValue = 1
    else
        FontValue = FontValue + 1
    end
end


local function GetPartCorners(Part)
    local Size = Part.Size * Vector3.new(1, 1.5)
    return {
        TR = (Part.CFrame * CFrame.new(-Size.X, -Size.Y, 0)).Position,
        BR = (Part.CFrame * CFrame.new(-Size.X, Size.Y, 0)).Position,
        TL = (Part.CFrame * CFrame.new(Size.X, -Size.Y, 0)).Position,
        BL = (Part.CFrame * CFrame.new(Size.X, Size.Y, 0)).Position,
    }
end

local function DrawESP(plr)
    local Name = Drawing.new("Text")
    Name.Center = true
    Name.Visible = false
    Name.Outline = true
    Name.Transparency = 1
    local highlight = Instance.new("Highlight")
    	highlight.FillTransparency = 0.4
	highlight.FillColor = plr.TeamColor.Color
	highlight.OutlineColor = plr.TeamColor.Color
    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
highlight.Parent = plr.Character
    local function Update()
        local c
        c = game:GetService("RunService").RenderStepped:Connect(function()
            if plr.Character ~= nil and plr.Character:FindFirstChildOfClass("Humanoid") ~= nil and plr.Character:FindFirstChild("HumanoidRootPart") ~= nil and plr.Character:FindFirstChildOfClass("Humanoid").Health > 0 and plr.Character:FindFirstChild("Head") ~= nil then
                local Distance = (Camera.CFrame.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                local Vector, OnScreen = Camera:WorldToScreenPoint(plr.Character.Head.Position)
                    Name.Position = Vector2.new(Vector.X, Vector.Y + math.clamp(Distance / 10, 10, 30) - 10)
                    Name.Size = math.clamp(30 - Distance / 10, 15, 30)
                    Name.Font = FontValue
                    --Name.Transparency = math.clamp((500 - Distance) / 200, 0.2, 1)

                
                local PartCorners = GetPartCorners(plr.Character.HumanoidRootPart)
                local VectorTR, OnScreenTR = Camera:WorldToScreenPoint(PartCorners.TR)
                local VectorBR, OnScreenBR = Camera:WorldToScreenPoint(PartCorners.BR)
                local VectorTL, OnScreenTL = Camera:WorldToScreenPoint(PartCorners.TL)
                local VectorBL, OnScreenBL = Camera:WorldToScreenPoint(PartCorners.BL)
          
                
                if game.Players:FindFirstChild(plr.Name) == nil then
                    c:Disconnect()
                end
            end
        end)
    end
    coroutine.wrap(Update)()
end

for _,v in pairs(game:GetService("Players"):GetChildren()) do
    if v.Name ~= Player.Name then
        DrawESP(v)
    end
end

game:GetService("Players").PlayerAdded:Connect(function(v)
    DrawESP(v)
end)

